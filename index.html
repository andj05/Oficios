<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oficios - Encuentra profesionales cerca de ti</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Oficios</div>
                <div class="nav-buttons">
                    <button class="btn btn-primary" onclick="openModal('registerModal')">Registrar mi oficio</button>
                    <button class="btn btn-secondary" onclick="openModal('loginModal')">Iniciar sesión</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Encuentra profesionales cerca de ti</h1>
            <p>Conecta con expertos en diferentes oficios y servicios en tu zona</p>
        </div>
    </section>

    <!-- Search Section -->
    <section class="search-section">
        <div class="container">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Buscar por oficio..." id="searchInput" autocomplete="off">
                <select class="search-select" id="categorySelect">
                    <option value="">Todas las categorías</option>
                    <option value="Albañilería">Albañilería</option>
                    <option value="Plomería">Plomería</option>
                    <option value="Electricidad">Electricidad</option>
                    <option value="Carpintería">Carpintería</option>
                    <option value="Costura">Costura</option>
                    <option value="Peluquería">Peluquería</option>
                    <option value="Jardinería">Jardinería</option>
                    <option value="Soldadura">Soldadura</option>
                    <option value="Pintura">Pintura</option>
                    <option value="Mecánica">Mecánica</option>
                    <option value="Limpieza">Limpieza</option>
                    <option value="Cocina">Cocina</option>
                </select>
                <button class="search-btn" onclick="searchWorkers()">Buscar</button>
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <section class="results-section">
        <div class="container">
            <div id="resultsContainer">
                <h2>Profesionales destacados</h2>
                <div class="results-grid" id="resultsGrid">
                    <!-- Los resultados se cargarán dinámicamente -->
                </div>
            </div>
        </div>
    </section>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <h2>Registrar mi oficio</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="fullName">Nombre completo</label>
                    <input type="text" id="fullName" autocomplete="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Correo electrónico</label>
                    <input type="email" id="email" autocomplete="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Contraseña (mínimo 6 caracteres)</label>
                    <input type="password" id="password" autocomplete="new-password" required minlength="6">
                </div>
                <div class="form-group">
                    <label for="phone">Teléfono</label>
                    <input type="tel" id="phone" autocomplete="tel" required>
                </div>
                <div class="form-group">
                    <label for="location">Ubicación (Ciudad, Provincia)</label>
                    <input type="text" id="location" autocomplete="address-level2" required>
                </div>
                <div class="form-group">
                    <label for="trade">Oficio</label>
                    <select id="trade" required>
                        <option value="">Seleccionar oficio</option>
                        <option value="Albañilería">Albañilería</option>
                        <option value="Plomería">Plomería</option>
                        <option value="Electricidad">Electricidad</option>
                        <option value="Carpintería">Carpintería</option>
                        <option value="Costura">Costura</option>
                        <option value="Peluquería">Peluquería</option>
                        <option value="Jardinería">Jardinería</option>
                        <option value="Soldadura">Soldadura</option>
                        <option value="Pintura">Pintura</option>
                        <option value="Mecánica">Mecánica</option>
                        <option value="Limpieza">Limpieza</option>
                        <option value="Cocina">Cocina</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="description">Descripción de tu trabajo</label>
                    <textarea id="description" placeholder="Ejemplo: Albañil con 15 años de experiencia en construcción residencial..." required></textarea>
                </div>
                <div class="form-group">
                    <label>Foto de perfil</label>
                    <div class="photo-upload" onclick="document.getElementById('profilePhoto').click()">
                        <p>Haz clic para subir tu foto de perfil</p>
                        <input type="file" id="profilePhoto" accept="image/*" style="display: none;">
                    </div>
                    <div id="profilePhotoPreview" class="photo-preview"></div>
                </div>
                <div class="form-group">
                    <label>Fotos de tus trabajos (máximo 3)</label>
                    <div class="photo-upload" onclick="document.getElementById('workPhotos').click()">
                        <p>Haz clic para subir fotos de tus trabajos</p>
                        <input type="file" id="workPhotos" accept="image/*" multiple style="display: none;">
                    </div>
                    <div id="workPhotosPreview" class="photo-preview"></div>
                </div>
                <div style="background: #e8f5e8; padding: 1rem; border-radius: 5px; margin-bottom: 1rem; font-size: 0.9rem; color: #333;">
                    <strong>📸 Info:</strong> Las fotos se guardan localmente en la base de datos. Recomendado: imágenes pequeñas (máx 500KB cada una).
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Registrarme</button>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2>Iniciar sesión</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Correo electrónico</label>
                    <input type="email" id="loginEmail" autocomplete="email" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Contraseña</label>
                    <input type="password" id="loginPassword" autocomplete="current-password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Iniciar sesión</button>
                <div style="text-align: center; margin-top: 1rem; font-size: 0.9rem; color: #666;">
                    ¿No tienes cuenta? 
                    <button type="button" onclick="closeModal('loginModal'); openModal('registerModal');" style="background: none; border: none; color: #667eea; text-decoration: underline; cursor: pointer;">
                        Regístrate aquí
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Profile Dashboard Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <span class="close" onclick="closeModal('profileModal')">&times;</span>
            <div id="profileDashboard">
                <!-- El contenido se carga dinámicamente -->
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('editProfileModal')">&times;</span>
            <h2>Editar mi perfil</h2>
            <form id="editProfileForm">
                <div class="form-group">
                    <label for="editFullName">Nombre completo</label>
                    <input type="text" id="editFullName" required>
                </div>
                <div class="form-group">
                    <label for="editPhone">Teléfono</label>
                    <input type="tel" id="editPhone" required>
                </div>
                <div class="form-group">
                    <label for="editLocation">Ubicación</label>
                    <input type="text" id="editLocation" required>
                </div>
                <div class="form-group">
                    <label for="editTrade">Oficio</label>
                    <select id="editTrade" required>
                        <option value="">Seleccionar oficio</option>
                        <option value="Albañilería">Albañilería</option>
                        <option value="Plomería">Plomería</option>
                        <option value="Electricidad">Electricidad</option>
                        <option value="Carpintería">Carpintería</option>
                        <option value="Costura">Costura</option>
                        <option value="Peluquería">Peluquería</option>
                        <option value="Jardinería">Jardinería</option>
                        <option value="Soldadura">Soldadura</option>
                        <option value="Pintura">Pintura</option>
                        <option value="Mecánica">Mecánica</option>
                        <option value="Limpieza">Limpieza</option>
                        <option value="Cocina">Cocina</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editDescription">Descripción</label>
                    <textarea id="editDescription" required></textarea>
                </div>
                <div class="form-group">
                    <label>Nueva foto de perfil (opcional)</label>
                    <div class="photo-upload" onclick="document.getElementById('editProfilePhoto').click()">
                        <p>Haz clic para cambiar tu foto de perfil</p>
                        <input type="file" id="editProfilePhoto" accept="image/*" style="display: none;">
                    </div>
                    <div id="editProfilePhotoPreview" class="photo-preview"></div>
                </div>
                <div class="form-group">
                    <label>Nuevas fotos de trabajos (opcional, máximo 3)</label>
                    <div class="photo-upload" onclick="document.getElementById('editWorkPhotos').click()">
                        <p>Haz clic para cambiar fotos de trabajos</p>
                        <input type="file" id="editWorkPhotos" accept="image/*" multiple style="display: none;">
                    </div>
                    <div id="editWorkPhotosPreview" class="photo-preview"></div>
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">Guardar cambios</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editProfileModal')" style="flex: 1;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>